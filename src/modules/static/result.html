<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Slash Mini-Version</title>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>
<body>

<div class="container" id="abc">
    <div class="row">
        <div class="col-sm">
            <div class="form-group">
                <label class="control-label col-sm-offset-2 col-sm-2" for="company"></label>
                <div class="col-sm-6 col-md-4">
                    <form action="/filter?product_name={{ prod }}" method="post" id="filter1">
                        <select id="choice1" name="sort" class="form-control">
                            <option value="default">Sort by</option>
                            <option value="rades">Rating High to Low</option>
                            <option value="raasc">Rating Low to High</option>
                            <option value="pasc">Price Low to High</option>
                            <option value="pdes">Price High to Low</option>
                            <br>
                        </select>
                </div>
            </div>

        </div>
        <div class="col-sm">
            <div class="form-group">
                <label class="control-label col-sm-offset-2 col-sm-2" for="company"></label>
                <div class="col-sm-6 col-md-4">
                    <select id="choice1" name="currency" class="form-control">
                        <option value="usd">USD</option>
                        <option value="inr">INR</option>
                        <option value="euro">EURO</option>
                        <option value="yuan">YUAN</option>
                        <option value="aud">AUD</option>
                        <option value="pound">POUND</option>
                        <br>
                    </select>
                </div>
            </div>
        </div>
        <div class="col-sm">

            <div class="form-group">
                <label class="control-label col-sm-offset-2 col-sm-2" for="company"></label>
                <div class="col-sm-6 col-md-4">
                    <select id="choice1" name="num" class="form-control">
                        <option value="default">Result Length</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
            </div>

        </div>
        <div class="col-sm">
            <br>
            <input type="submit" class="button button1" value="Filter Search"/>
            </form>
        </div>
        <!-- <div class="col-sm">
            <form action = "/csv?product_name={{prod}}" method = "post" id="csv">
            <br>
            <input type = "submit" class="button button1" value = "Convert into CSV" />
         </form>  
         </div> -->
    </div>
</div>
</form>
<hr>

<br>
    <div class="container">
        <div class="row">
            {% for product in data %}
            <div class="col-md-3">
                <div class="card mb-4 cutom-card">
                    {% if product.website == "amazon" %}
                    <img src="images/amazon.jpg" alt="Amazon Logo">
                    {% elif product.website == "walmart" %}
                    <img src="images/walmart.jpg" alt="Walmart Logo">
                    {% elif product.website == "Etsy" %}
                    <img src="images/Etsy.jpg" alt="Etsy Logo">
                    {% elif product.website == "bjs" %}
                    <img src="images/bjs.jpg" alt="BJ's Logo">
                    {% elif product.website == "google" %}
                    <img src="images/google.jpg" alt="Google Logo">
                    {% elif product.website == "costco" %}
                    <img src="images/costco.jpg" alt="Costco Logo">
                    {% else %}
                    <img src="default-logo.png" alt="Default Logo">
                    {% endif %}
                    <img class="card-img-top" src="{{ product.image_url }}" alt="No image" style="width: 250px; height: 270px;">
                    <div class="card-body" style="height: 200px;">
                        <a href={{ product.link }} target="_blank">{{ product.title }}</a>
                    </div>
                    <div class="card-body">   
                        <p class="card-text">{{ product.price }}</p>
                        <p class="card-text">Average rating: {{ product.rating }}</p>
                        <p class="card-text">Fetched from: {{ product.website }}</p>
                    </div>
                </div>
            </div>
            {% if loop.index0 % 4 == 3 %} {# Check if 3, as loop.index0 starts at 0 #}
        </div>    
        <div class="row">
            {% endif %}
            {% endfor %}
        </div>
    </div>

</body>
</html>
